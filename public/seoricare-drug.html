<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마약류 관리</title>
    <!-- Tailwind CSS 및 아이콘 라이브러리 추가 -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- JavaScript 파일 추가 -->
    <script type="module" src="./seoricare-drug.js"></script>
    <!-- SheetJS 라이브러리 추가 -->
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <style>
        /* 알림 스타일 */
        #custom-alert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #323232;
            color: #fff;
            padding: 16px 24px;
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            opacity: 0;
            z-index: 1000;
            transition: opacity 0.5s ease-in-out;
        }

        #custom-alert.show {
            opacity: 1;
        }

        /* 테이블 및 행 스타일 */
        table {
            border-color: rgba(0, 0, 0, 0.12); /* Tailwind의 divider 색상 */
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: rgba(3, 218, 198, 0.2); /* hover 시 색상 */
        }

        .selected {
            background-color: #6200ea; /* 인디고 색상 */
            color: white;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal h-screen">
    <!-- 알림 요소 -->
    <div id="custom-alert">
        <span id="alert-message"></span>
    </div>

    <!-- 상단바 -->
    <nav class="bg-indigo-500 p-2 shadow-md">
        <div class="flex justify-between items-center">
            <h1 class="text-white text-2xl font-bold">서리단내과의원 검사등록시스템</h1>
            <div class="flex items-center">
                <div id="userStatus" class="text-white mr-4">로그인 상태 확인 중...</div>
                <button id="logoutBtn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">로그아웃</button>
            </div>
        </div>
    </nav>

    <!-- 메인 콘텐츠 좌우 분할 -->
    <div class="container mx-auto mt-4 px-4 flex" style="max-width: 100%; height: calc(100vh - 6rem);">
        <!-- 왼쪽 섹션: 마약류 재고 목록 (2/3 비율) -->
        <div id="테이블컨테이너" class="w-2/3 p-4 bg-white rounded shadow-md mr-4 flex flex-col" style="height: 100%;">
            <!-- 테이블 제목 -->
            <h2 class="text-lg font-bold mb-4">마약류 재고 목록</h2>
            <!-- 테이블 부분 -->
            <div id="테이블스크롤영역" class="flex-grow overflow-auto">
                <table class="min-w-full bg-white border text-center">
                    <!-- 테이블 내용 -->
                    <thead>
                        <tr>
                            <th class="py-2 cursor-pointer text-center" onclick="정렬('제품명')">제품명</th>
                            <th class="py-2 cursor-pointer text-center" onclick="정렬('성분명')">성분명</th>
                            <th class="py-2 cursor-pointer text-center" onclick="정렬('일련번호')">일련번호</th>
                            <th class="py-2 cursor-pointer text-center" onclick="정렬('앰플용량')">앰플 용량 (mL)</th>
                            <th class="py-2 cursor-pointer text-center" onclick="정렬('앰플수량')">앰플 수량</th>
                            <th class="py-2 cursor-pointer text-center" onclick="정렬('재고량')">재고량</th>
                        </tr>                
                    </thead>
                    <tbody id="마약류테이블">
                        <!-- 테이블 데이터 -->
                    </tbody>
                </table>
            </div>
            <!-- 합계 표시 영역 -->
            <div id="합계표시영역" class="mt-4 p-4 bg-white rounded shadow-md">
                <!-- 합계 내용은 JavaScript에서 채워집니다 -->
            </div>
        </div>

        <!-- 오른쪽 섹션: 마약류 기록 추가 및 엑셀 업로드 (1/3 비율) -->
        <div class="w-1/3 p-4 bg-white rounded shadow-md overflow-auto">
            <h2 class="text-lg font-bold mb-4">마약류 추가 / 수정</h2>
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block">제품명</label>
                    <input id="제품명" type="text" class="w-full px-3 py-2 border rounded" placeholder="제품명 입력">
                </div>
                <div>
                    <label class="block">성분명</label>
                    <select id="성분명" class="w-full px-3 py-2 border rounded">
                        <option value="">성분명 선택</option>
                        <option value="미다졸람">미다졸람</option>
                        <option value="프로포폴">프로포폴</option>
                        <option value="페티딘">페티딘</option>
                        <option value="디아제팜">디아제팜</option>
                    </select>
                </div>
                <div>
                    <label class="block">일련번호</label>
                    <input id="일련번호" type="text" class="w-full px-3 py-2 border rounded" placeholder="일련번호 입력">
                </div>
                <div>
                    <label class="block">앰플 용량 (mL)</label>
                    <input id="앰플용량" type="number" step="0.01" class="w-full px-3 py-2 border rounded" placeholder="용량 입력">
                </div>
                <div>
                    <label class="block">앰플 수량</label>
                    <input id="앰플수량" type="number" class="w-full px-3 py-2 border rounded" placeholder="수량 입력">
                </div>
                <div>
                    <label class="block">재고량</label>
                    <input id="재고량" type="number" class="w-full px-3 py-2 border rounded" placeholder="재고량 입력">
                </div>
            </div>
            <!-- 버튼 그룹 -->
            <div class="mt-4 flex space-x-2">
                <button id="추가버튼" onclick="마약류추가()" class="bg-indigo-500 hover:bg-indigo-700 text-white px-4 py-2 rounded">추가</button>
                <button id="수정버튼" onclick="마약류수정()" class="bg-indigo-500 hover:bg-indigo-700 text-white px-4 py-2 rounded hidden">수정</button>
                <button id="삭제버튼" onclick="마약류삭제()" class="bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded hidden">삭제</button>
                <button id="사용중버튼" onclick="사용중인일련번호추가()" class="bg-indigo-500 hover:bg-indigo-700 text-white px-4 py-2 rounded hidden">사용중인 일련번호</button>
            </div>

            <!-- 엑셀 파일 업로드 -->
            <h2 class="text-lg font-bold mt-8 mb-4">엑셀 업로드</h2>
            <!-- 숨겨진 파일 입력 요소 -->
            <input type="file" id="엑셀파일" accept=".xlsx, .xls" class="hidden">
            <!-- 커스텀 파일 선택 버튼 -->
            <button id="파일선택버튼" class="bg-indigo-500 hover:bg-indigo-700 text-white px-4 py-2 rounded">파일 선택</button>
            <!-- 선택된 파일명 표시 -->
            <span id="선택된파일명" class="ml-2 text-gray-600"></span>            
            <button onclick="엑셀업로드()" class="bg-green-500 hover:bg-green-700 text-white px-4 py-2 rounded">업로드</button>

            <!-- DB 삭제 버튼 -->
            <h2 class="text-lg font-bold mt-8 mb-4">데이터베이스 관리</h2>
            <button onclick="DB삭제()" class="bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded hidden">DB 삭제</button>
        </div>
    </div>
</body>
</html>